
<!DOCTYPE html>

<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <title>视觉小说模式教程 &mdash; Ren&#39;Py 文档</title>
    <link rel="stylesheet" href="_static/screen.css" type="text/css" media="screen, projection"/>
    <link rel="stylesheet" href="_static/renpydoc.css" type="text/css" media="print" />

    <!--[if lt IE 8]>
    <link rel="stylesheet" href="_static/renpydoc.css" type="text/css" media="screen, projection"/>
    <![endif]-->

    <link rel="stylesheet" href="_static/renpydoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '6.18.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Ren&#39;Py Documentation" href="index.html" />
    <link rel="next" title="Text Input" href="input.html" />
    <link rel="prev" title="Store Variables" href="store_variables.html" />
  </head>
  <body>
    <div class="related">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="input.html" title="Text Input"
             accesskey="N">下一页</a> |</li>
        <li class="right" >
          <a href="store_variables.html" title="Store Variables"
             accesskey="P">上一页</a> |</li>

        <li> <img src="_static/logo.png" width=19 height=21 align=center>
        <li> <a href="http://www.renpy.org/">主页</a> |
        <li><a href="index.html">文档</a></li>
      </ul>
    </div>
  <div class="container">
  <div class="span4">

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">目录</a></h3>
  <ul>
<li><a class="reference internal" href="#">视觉小说模式教程</a><ul>
<li><a class="reference internal" href="#getting-started">准备工作</a></li>
<li><a class="reference internal" href="#menus">选项</a></li>
<li><a class="reference internal" href="#showing-and-hiding-the-nvl-mode-window">窗口的显示和隐藏</a></li>
<li><a class="reference internal" href="#customizing-characters">自定义角色</a></li>
<li><a class="reference internal" href="#customizing-menus">自定义选项</a></li>
<li><a class="reference internal" href="#customizing-the-nvl-window">自定义窗口</a></li>
<li><a class="reference internal" href="#paged-rollback">页面回滚</a></li>
<li><a class="reference internal" href="#script-of-the-question-nvl-mode-edition">The Question 的脚本（视觉小说模式）</a></li>
</ul>
</li>
</ul>

  <h4>上一节</h4>
  <p class="topless"><a href="store_variables.html"
                        title="previous chapter">内置变量</a></p>
  <h4>下一节</h4>
  <p class="topless"><a href="input.html"
                        title="next chapter">文字输入</a></p>
            <h4>搜索</h4>

            <div id="cse-search-form" style="width: 100%;"></div>

      <div class="copydata">
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
    <br>
      </div>
        </div>
      </div>

  </div>


    <div class="document span20 last">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">

  <div class="section" id="nvl-mode-tutorial">
<span id="nvl-mode"></span><h1>视觉小说模式向导<a class="headerlink" href="#nvl-mode-tutorial" title="Permalink to this headline">¶</a></h1>
<p>
  目前的文字游戏主要有两种模式，ADV（文字冒险）模式通常一次只在屏幕下方的窗口显示一行对话或者旁白，
  NVL（视觉小说）模式则同时在占据整个屏幕的窗口上显示多行文本。
</p>
<p>
  在这个教程中你将学习到如何使用 Ren'Py 制作视觉小说类游戏。
  在阅读这个教程前你至少应该对<a class="reference internal" href="quickstart.html"><em>快速入门</em></a>部分介绍的 Ren'Py 基础有一定的了解。</p>
<div class="section" id="getting-started">
<h2>准备工作<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>
  要将视觉小说模式加入到 Ren'Py 中总共分两步。
  首先，你必须定义一个视觉小说模式下使用的角色，
  之后，在一页对话的结尾加上 <tt class="docutils literal"><span class="pre">nvl</span>
<span class="pre">clear</span></tt> 命令。</p>
<p>
  在角色定义时加入
  <tt class="docutils literal"><span class="pre">kind=nvl</span></tt>
  语句便可将其定义为视觉小说模式下的角色。
  例如，在快速入门部分我们定义了下面两个角色：</p>
<div class="highlight-renpy"><div class="highlight"><pre><span class="k">define</span> <span class="n">s</span> <span class="o">=</span> <span class="n">Character</span><span class="p">(</span><span class="s">&#39;Sylvie&#39;</span><span class="p">,</span> <span class="na">color</span><span class="o">=</span><span class="s">&quot;#c8ffc8&quot;</span><span class="p">)</span>
<span class="k">define</span> <span class="n">m</span> <span class="o">=</span> <span class="n">Character</span><span class="p">(</span><span class="s">&#39;Me&#39;</span><span class="p">,</span> <span class="na">color</span><span class="o">=</span><span class="s">&quot;#c8c8ff&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>要想切换成视觉小说模式，需要将定义改成下面这样：</p>
<div class="highlight-renpy"><div class="highlight"><pre><span class="k">define</span> <span class="n">s</span> <span class="o">=</span> <span class="n">Character</span><span class="p">(</span><span class="s">&#39;Sylvie&#39;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="k">nvl</span><span class="p">,</span> <span class="na">color</span><span class="o">=</span><span class="s">&quot;#c8ffc8&quot;</span><span class="p">)</span>
<span class="k">define</span> <span class="n">m</span> <span class="o">=</span> <span class="n">Character</span><span class="p">(</span><span class="s">&#39;Me&#39;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="k">nvl</span><span class="p">,</span> <span class="na">color</span><span class="o">=</span><span class="s">&quot;#c8c8ff&quot;</span><span class="p">)</span>
<span class="k">define</span> <span class="n">narrator</span> <span class="o">=</span> <span class="n">Character</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="k">nvl</span><span class="p">)</span>
</pre></div>
</div>
<p>
  请注意，我们还为视觉小说模式定义了一个 <tt class="docutils literal"><span class="pre">narrator</span></tt> （旁白）角色。
  <tt class="docutils literal"><span class="pre">narrator</span></tt> 角色将作为所有没有标注姓名的对话命令中的说话者。</p>
<p>
  如果我们就这样运行游戏的话，最开始的对话都将正常显示，但是，不久之后新的对话就会超出屏幕。
  为了让剧本能够正常分页，在每一页的最后加上 <tt class="docutils literal"><span class="pre">nvl</span>
<span class="pre">clear</span></tt> 命令。</p>
<p>下面是一个能够分页的脚本范例：</p>
<div class="highlight-renpy"><div class="highlight"><pre><span class="k">label</span> <span class="n">start</span><span class="p">:</span>
    <span class="s">&quot;I&#39;ll ask her...&quot;</span>

    <span class="n">m</span> <span class="s">&quot;Um... will you...&quot;</span>
    <span class="n">m</span> <span class="s">&quot;Will you be my artist for a visual novel?&quot;</span>

    <span class="k">nvl</span> <span class="n">clear</span>

    <span class="s">&quot;Silence.&quot;</span>
    <span class="s">&quot;She is shocked, and then...&quot;</span>

    <span class="n">s</span> <span class="s">&quot;Sure, but what is a </span><span class="se">\&quot;</span><span class="s">visual novel?</span><span class="se">\&quot;</span><span class="s">&quot;</span>

    <span class="k">nvl</span> <span class="n">clear</span>
</pre></div>
</div>
<p>
  这个例子展示了用视觉小说模式的脚本实现段落多行文字的基本方法（适合用来制作没有转场的视觉小说游戏）。
</p>
</div>
<div class="section" id="menus">
<h2>选项<a class="headerlink" href="#menus" title="Permalink to this headline">¶</a></h2>
<p>
  默认情况下，选项将以文字冒险模式下占据整个屏幕的方式显示。
  但是，你也可以将选项的显示方式改成紧跟在页面文字之后的视觉小说模式。
</p>
<p>
  要想让选项使用视觉小说模式，可以这么写：</p>
<div class="highlight-renpy"><div class="highlight"><pre><span class="k">init</span> <span class="k">python</span><span class="p">:</span>
    <span class="k">menu</span> <span class="o">=</span> <span class="n">nvl_menu</span>
</pre></div>
</div>
<p>
  由于选项会在选择后消失，通常在选择选项后会加入 &quot;nvl clear&quot; 或者某些提示来表明选择了某个选项。</p>
</div>
<div class="section" id="showing-and-hiding-the-nvl-mode-window">
<h2>显示和隐藏视觉小说模式的窗口<a class="headerlink" href="#showing-and-hiding-the-nvl-mode-window" title="Permalink to this headline">¶</a></h2>
<p>
  视觉小说模式的窗口可以通过 <tt class="docutils literal"><span class="pre">window</span> <span class="pre">show</span></tt>
和 <tt class="docutils literal"><span class="pre">window</span> <span class="pre">hide</span></tt> 语句控制，要想这么做的话，讲以下代码加入到你的游戏中：</p>
<div class="highlight-renpy"><div class="highlight"><pre><span class="k">init</span> <span class="k">python</span><span class="p">:</span>
    <span class="n">config</span><span class="o">.</span><span class="n">empty_window</span> <span class="o">=</span> <span class="n">nvl_show_core</span>
    <span class="n">config</span><span class="o">.</span><span class="n">window_hide_transition</span> <span class="o">=</span> <span class="n">dissolve</span>
    <span class="n">config</span><span class="o">.</span><span class="n">window_show_transition</span> <span class="o">=</span> <span class="n">dissolve</span>
</pre></div>
</div>
<p>将 <a class="reference internal" href="config.html#var-config.empty_window"><tt class="xref std std-var docutils literal"><span class="pre">config.empty_window</span></tt></a> 设置为 <tt class="docutils literal"><span class="pre">nvl_show_core</span></tt> 可以让窗口在转场的过程中也不会消失。（后两行设置了默认情况下窗口的显示和隐藏效果。）</p>
<p>下面是一个显示和隐藏窗口的例子：</p>
<div class="highlight-renpy"><div class="highlight"><pre><span class="k">label</span> <span class="n">meadow</span><span class="p">:</span>

    <span class="k">nvl</span> <span class="n">clear</span>

    <span class="k">window</span> <span class="k">hide</span>
    <span class="k">scene</span> <span class="n">bg</span> <span class="n">meadow</span>
    <span class="k">with</span> <span class="n">fade</span>
    <span class="k">window</span> <span class="k">show</span>

    <span class="s">&quot;We reached the meadows just outside our hometown. Autumn was so
     beautiful here.&quot;</span>
    <span class="s">&quot;When we were children, we often played here.&quot;</span>

    <span class="n">m</span> <span class="s">&quot;Hey... ummm...&quot;</span>

    <span class="k">window</span> <span class="k">hide</span>
    <span class="k">show</span> <span class="n">sylvie</span> <span class="n">smile</span>
    <span class="k">with</span> <span class="n">dissolve</span>
    <span class="k">window</span> <span class="k">show</span>

    <span class="s">&quot;She turned to me and smiled.&quot;</span>
    <span class="s">&quot;I&#39;ll ask her...&quot;</span>
    <span class="n">m</span> <span class="s">&quot;Ummm... will you...&quot;</span>
    <span class="n">m</span> <span class="s">&quot;Will you be my artist for a visual novel?&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="customizing-characters">
<h2>自定义角色<a class="headerlink" href="#customizing-characters" title="Permalink to this headline">¶</a></h2>
<p>
  视觉小说模式下可以通过自定义改变说话角色的表现方式，你可以在其中选择最适合你游戏的方式。</p>
<ol class="arabic">
<li><p class="first">
  默认的表现方式是在对话的左侧显示角色的名称，名称的颜色由“color”语句定义。</p>
<div class="highlight-renpy"><div class="highlight"><pre><span class="k">define</span> <span class="n">s</span> <span class="o">=</span> <span class="n">Character</span><span class="p">(</span><span class="s">&#39;Sylvie&#39;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="k">nvl</span><span class="p">,</span> <span class="na">color</span><span class="o">=</span><span class="s">&quot;#c8ffc8&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">
  另一种表现方式是将角色名称内嵌进对话内容中。由该名角色所说的对话内容被包围在一对括号内。
  请注意，角色的名称和前引号在 “what_prefix” 语句中定义。（后引号则在 “what_suffix” 中定义。）
</p>
<div class="highlight-renpy"><div class="highlight"><pre><span class="k">define</span> <span class="n">s</span> <span class="o">=</span> <span class="n">Character</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="k">nvl</span><span class="p">,</span> <span class="n">what_prefix</span><span class="o">=</span><span class="s">&quot;Sylvie: </span><span class="se">\&quot;</span><span class="s">&quot;</span><span class="p">,</span>
                     <span class="n">what_suffix</span><span class="o">=</span><span class="s">&quot;</span><span class="se">\&quot;</span><span class="s">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">
  第三种表现方式是完全不显示角色的姓名，只在对话前后显示引号。
</p>
<div class="highlight-renpy"><div class="highlight"><pre><span class="k">define</span> <span class="n">s</span> <span class="o">=</span> <span class="n">Character</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="k">nvl</span><span class="p">,</span> <span class="n">what_prefix</span><span class="o">=</span><span class="s">&quot;</span><span class="se">\&quot;</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">what_suffix</span><span class="o">=</span><span class="s">&quot;</span><span class="se">\&quot;</span><span class="s">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">
  由于第三种表现方式可能会让人无法区分说话者，我们可以使用 “what_color” 改变对话文字的颜色。
  </p>
<div class="highlight-renpy"><div class="highlight"><pre><span class="k">define</span> <span class="n">s</span> <span class="o">=</span> <span class="n">Character</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="k">nvl</span><span class="p">,</span> <span class="n">what_prefix</span><span class="o">=</span><span class="s">&quot;</span><span class="se">\&quot;</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">what_suffix</span><span class="o">=</span><span class="s">&quot;</span><span class="se">\&quot;</span><span class="s">&quot;</span><span class="p">,</span>
                     <span class="n">what_color</span><span class="o">=</span><span class="s">&quot;#c8ffc8&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">
  当然，如果你想自己输入全部的文字的话，你也可以使用什么定义都没有的视觉小说角色。（通常这样的角色被作为旁白使用。）
</p>
<div class="highlight-renpy"><div class="highlight"><pre><span class="k">define</span> <span class="n">s</span> <span class="o">=</span> <span class="n">Character</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="k">nvl</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="customizing-menus">
<h2>自定义选项<a class="headerlink" href="#customizing-menus" title="Permalink to this headline">¶</a></h2>
<p>
  选项的部分样式可以由你自行定义。下面是一些自定义选项样式的例子。
  你可以通过 <a class="reference internal" href="style.html"><em>样式</em></a> 页面获取到更多有用的信息。</p>
<div class="highlight-renpy"><div class="highlight"><pre><span class="k">init</span> <span class="k">python</span><span class="p">:</span>

    <span class="c"># 未选择选项的颜色。</span>
    <span class="k">style</span><span class="o">.</span><span class="n">nvl_menu_choice</span><span class="o">.</span><span class="na">idle_color</span> <span class="o">=</span> <span class="s">&quot;#ccccccff&quot;</span>

    <span class="c"># 当前选择选项的颜色。</span>
    <span class="k">style</span><span class="o">.</span><span class="n">nvl_menu_choice</span><span class="o">.</span><span class="na">hover_color</span> <span class="o">=</span> <span class="s">&quot;#ffffffff&quot;</span>

    <span class="c"># 未选择选项的背景色。</span>
    <span class="c"># hovered.</span>
    <span class="k">style</span><span class="o">.</span><span class="n">nvl_menu_choice_button</span><span class="o">.</span><span class="na">idle_background</span> <span class="o">=</span> <span class="s">&quot;#00000000&quot;</span>

    <span class="c"># 当前选择选项的背景色。</span>
    <span class="c"># hovered.</span>
    <span class="k">style</span><span class="o">.</span><span class="n">nvl_menu_choice_button</span><span class="o">.</span><span class="na">hover_background</span> <span class="o">=</span> <span class="s">&quot;#ff000044&quot;</span>

    <span class="c"># 选项左侧的缩进大小。</span>
    <span class="k">style</span><span class="o">.</span><span class="n">nvl_menu_choice_button</span><span class="o">.</span><span class="na">left_margin</span> <span class="o">=</span> <span class="mi">20</span>
</pre></div>
</div>
</div>
<div class="section" id="customizing-the-nvl-window">
<h2>自定义窗口<a class="headerlink" href="#customizing-the-nvl-window" title="Permalink to this headline">¶</a></h2>
<p>
  窗口的部分样式可以由你自行定义。下面是一些自定义窗口样式的例子。
  你可以通过 <a class="reference internal" href="style.html"><em>样式</em></a> 页面获取到更多有用的信息。</p>
<div class="highlight-renpy"><div class="highlight"><pre><span class="k">init</span> <span class="k">python</span><span class="p">:</span>

    <span class="c"># 设置视觉小说模式窗口的背景；</span>
    <span class="c"># 背景的大小应该和屏幕大小相同。</span>
    <span class="k">style</span><span class="o">.</span><span class="n">nvl_window</span><span class="o">.</span><span class="na">background</span> <span class="o">=</span> <span class="s">&quot;nvl_window.png&quot;</span>

    <span class="c"># 设置窗口内容的边距。</span>
    <span class="c"># 通过设置这里防止文字超出背景图像的边框。</span>
    <span class="k">style</span><span class="o">.</span><span class="n">nvl_window</span><span class="o">.</span><span class="na">xpadding</span> <span class="o">=</span> <span class="mi">55</span>
    <span class="k">style</span><span class="o">.</span><span class="n">nvl_window</span><span class="o">.</span><span class="na">ypadding</span> <span class="o">=</span> <span class="mi">55</span>

    <span class="c"># 设置页面上每一段落文字的间距。</span>
    <span class="c"># 默认为10像素。</span>
    <span class="k">style</span><span class="o">.</span><span class="n">nvl_vbox</span><span class="o">.</span><span class="n">box_spacing</span> <span class="o">=</span> <span class="mi">10</span>
</pre></div>
</div>
<p>
  你也可以在通过修改视觉小说模式的视屏来对画面进行自定义。该视屏的名字为 <tt class="docutils literal"><span class="pre">nvl</span></tt>；具体请参考 <a class="reference internal" href="screen_special.html#nvl-screen"><em>NVL</em></a> 页面。</p>
</div>
<div class="section" id="paged-rollback">
<h2>页面回滚<a class="headerlink" href="#paged-rollback" title="Permalink to this headline">¶</a></h2>
<p>
  在视觉小说模式下使用页面回滚功能，回滚的将是一整页的内容而不是一段的内容。
  通过在脚本插入以下代码来打开回滚功能。
</p>
<div class="highlight-renpy"><div class="highlight"><pre><span class="k">init</span> <span class="k">python</span><span class="p">:</span>
    <span class="n">config</span><span class="o">.</span><span class="n">nvl_paged_rollback</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>
</div>
</div>
<div class="section" id="script-of-the-question-nvl-mode-edition">
<h2>The Question 的脚本（视觉小说模式）<a class="headerlink" href="#script-of-the-question-nvl-mode-edition" title="Permalink to this headline">¶</a></h2>
<p>你可以在 <a class="reference internal" href="thequestion_nvl.html#thequestion-nvl"><em>这里</em></a>
  查看视觉小说模式下 “The Question” 的完整脚本。</p>
</div>
</div>


          </div>
        </div>
      </div>
    </div>
    </div>
    <div class="related">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >索引</a></li>
        <li class="right" >
          <a href="input.html" title="Text Input"
             >下一页</a> |</li>
        <li class="right" >
          <a href="store_variables.html" title="Store Variables"
             >上一页</a> |</li>

        <li> <img src="_static/logo.png" width=19 height=21 align=center>
        <li> <a href="http://www.renpy.org/">主页</a> |
        <li><a href="index.html">文档</a></li>
      </ul>
    </div>


	<script src="http://www.google.com/jsapi" type="text/javascript"></script>
	<script type="text/javascript">
	  google.load('search', '1', {language : 'en' });
	  google.setOnLoadCallback(function() {
	    var customSearchControl = new google.search.CustomSearchControl('012476843541036121001:gx3sqkoaxkm');
	    customSearchControl.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);
	    var options = new google.search.DrawOptions();
	    options.enableSearchboxOnly("http://www.google.com/cse?cx=012476843541036121001:gx3sqkoaxkm");
	    customSearchControl.draw('cse-search-form', options);
	  }, true);
	</script>

  </body>
</html>